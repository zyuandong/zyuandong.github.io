---
title: Jekyll ç³»åˆ—ï¼ˆä¸‰ï¼‰ï¼šCategory å’Œ Tag
category: éšç¬”
tags: [Jekyll]
last_modified_date: 2021-05-12
---

åšå®¢ç³»ç»Ÿä¸­å¾ˆé‡è¦çš„ä¸€ç‚¹å°±æ˜¯å…³äºåˆ†ç±»å’Œæ ‡ç­¾ï¼Œå½“æ–‡ç« æ•°é‡è¿‡å¤šæ—¶ï¼Œé€šè¿‡åˆ†ç±»å’Œæ ‡ç­¾ï¼Œé˜…è¯»è€…å°±èƒ½æ¯”è¾ƒå¿«é€Ÿçš„æ‰¾åˆ°æƒ³è¦é˜…è¯»çš„æ–‡ç« ï¼ŒåŒæ—¶ä¹Ÿèƒ½å¤Ÿæ¸…æ¥šçš„äº†è§£ä¸å½“å‰æ–‡ç« æœ‰æ‰€å…³è”çš„å…¶å®ƒæ–‡ç« ã€‚

å½“æˆ‘å¼€å§‹æ­å»ºåšå®¢å¹¶è®¾è®¡åˆ†ç±»ä¸æ ‡ç­¾æ—¶ï¼Œæˆ‘çŠ¯éš¾äº†ã€‚æ ‡ç­¾å¾ˆå¥½ç†è§£ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ç¯‡æ–‡ç« æœ€æ ¸å¿ƒçš„ä¸»é¢˜ã€å±æ€§ï¼›ä½†å…³äºåˆ†ç±»ï¼Œæˆ‘æƒ³äº†è®¸ä¹…ä¹Ÿæ²¡æƒ³æ˜ç™½è¯¥å¦‚ä½•è®¾è®¡æ‰æ¯”è¾ƒåˆé€‚ã€‚

ä¾‹å¦‚ï¼šä¸€ç¯‡æ–‡ç« çš„åˆ†ç±»æ˜¯å¦å’Œæ ‡ç­¾ä¸€æ ·å¯ä»¥å¤šä¸ªï¼Ÿåˆ†ç±»æ˜¯å¦éœ€è¦åˆ†çº§ï¼Ÿç­‰ç­‰ã€‚ã€‚ã€‚ğŸ¤”

æœ€åæˆ‘æ„è¯†åˆ°ï¼šå¦‚æœå°†åˆ†ç±»è®¾è®¡çš„å¾ˆå¤æ‚ã€è¿‡å¤šçš„ç»†åˆ†å°±æ¨¡ç³Šäº†åˆ†ç±»ä¸æ ‡ç­¾çš„åŒºåˆ«ï¼Œåè€Œä½¿å¾—åˆ†ç±»è¶Šæ¥è¶Šæ ‡ç­¾åŒ–ã€‚ç´¢æ€§æœ€ååªç•™ä¸‹äº†æŠ€æœ¯ã€å·¥å…·ã€ç”Ÿæ´»ã€éšç¬”å››ç±»ï¼Œå¦‚æ­¤ç®€åŒ–çš„è®¾è®¡ä¹‹åï¼Œç»ˆäºæ”¶è´§ä¸€ä¸æ„‰æ‚¦æ„Ÿã€‚ğŸ‰

æœ€ç»ˆè¦å®ç°çš„ç›®æ ‡ï¼š

- å¯ä»¥é€šè¿‡ Category ã€tag è¿‡æ»¤å‡ºå¯¹åº”çš„æ–‡ç« åˆ—è¡¨
- ç‚¹å‡»æ–‡ç« è·³è½¬è‡³å¯¹åº”è¯¦æƒ…é¡µ

ç›®æ ‡æ¯”è¾ƒç®€å•ï¼Œå°±ä¸‹æ¥å°±å¼€å§‹å»å®ç°ã€‚

## æ–¹æ¡ˆä¸€ï¼šjekyll-archives å®ç°ï¼ˆæœ‰ç¼ºé™·ï¼‰

æŸ¥é˜…èµ„æ–™ä¹‹åå‘ç°äº†ä¸€ä¸ªæ’ä»¶ï¼š [jekyll-archives](https://jekyll.github.io/jekyll-archives/)ï¼Œæ­¤æ’ä»¶èƒ½å¤Ÿé€šè¿‡é…ç½® _config.yml æ–‡ä»¶ï¼Œè‡ªåŠ¨è¯†åˆ« post å¤´ä¿¡æ¯ä¸­çš„ category/categoriesã€tag/tags ç”Ÿæˆå¯¹åº”çš„é™æ€èµ„æºï¼Œå¹¶å¯ä»¥é€šè¿‡ç±»ä¼¼ `/categories/:name` è¿™æ ·çš„åœ°å€è®¿é—®å¯¹åº”åˆ†ç±»ä¸‹çš„æ–‡ç« èµ„æºã€‚

é¦–å…ˆçœ‹ä¸€ä¸‹ _config.yml æ–‡ä»¶çš„ç›¸å…³é…ç½®ï¼š

```yaml
# _config.yml
plugins:
  - jekyll-archives

jekyll-archives:
  enabled:
    - tags
    - categories
  layouts:
    tag: tag
    category: category
  permalinks:
    tag: tags/:name/
    category: categories/:name/
```

å¯ä»¥æŸ¥çœ‹ [jekyll-archives æ–‡æ¡£](https://jekyll.github.io/jekyll-archives/) æ¥è¯¦ç»†äº†è§£å„ä¸ªé…ç½®é¡¹çš„æ„ä¹‰ã€‚

## æ–¹æ¡ˆäºŒï¼šJekyll åŸç”Ÿå®ç°

æ ¹æ®ç›®æ ‡å¾—çŸ¥ï¼Œéœ€è¦å¾—åˆ° Category ã€Tag å¯¹åº”çš„æ–‡ç« ä¿¡æ¯ï¼Œå¹¶ä¸”æ–‡ç« ä¿¡æ¯è‡³å°‘éœ€è¦åŒ…å«æ ‡é¢˜åŠå¯¹åº”çš„é“¾æ¥åœ°å€ã€‚å¦‚ä½•å¾—åˆ°è¿™äº›ä¿¡æ¯å‘ï¼Ÿ

é€šè¿‡æŸ¥çœ‹ Jekyll æ–‡æ¡£ï¼Œå¯ä»¥å‘ç° Jkeyll ä¸­æœ‰ä¸€ä¸ªå…¨å±€å¯¹è±¡ `site`ï¼Œå…¶åŒ…å«äº†å¾ˆå¤šçš„å…³é”®ä¿¡æ¯ï¼š

| å˜é‡                                           | è¯´æ˜                                                |
| :--------------------------------------------- | :-------------------------------------------------- |
| `site.pages`                                   | æ‰€æœ‰é¡µé¢ä¿¡æ¯çš„åˆ—è¡¨                                  |
| `site.posts`                                   | æ‰€æœ‰æ–‡å­—ä¿¡æ¯çš„åˆ—è¡¨                                  |
| `site.categories` / `site.categories.CATEGORY` | æ‰€æœ‰åˆ†ç±»ä¿¡æ¯çš„åˆ—è¡¨ / æ‰€æœ‰åœ¨åˆ†ç±» `CATEGORY` ä¸‹çš„æ–‡ç«  |
| `site.tags` / `site.tags.TAG`                  | æ‰€æœ‰æ ‡ç­¾ä¿¡æ¯çš„åˆ—è¡¨ / æ‰€æœ‰åœ¨æ ‡ç­¾ `TAG` ä¸‹çš„æ–‡ç«       |

æœ‰äº†è¿™äº›æ•°æ®çš„æ”¯æŒï¼Œè¿™ä¸‹å°±æ–¹ä¾¿å¤šäº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯è€ƒè™‘è¯¥å¦‚ä½•å»ä½¿ç”¨è¿™äº›æ•°æ®ã€‚

### æ€è·¯ä¸€ï¼šè§£æé¡µé¢æ¸²æŸ“

åœ¨ _includes æ–‡ä»¶å¤¹ä¸‹åˆ›å»º categories.html å’Œ tags.html æ–‡ä»¶ï¼Œä½¿ç”¨ `site.categories` å’Œ `site.tags` ç”Ÿæˆé¡µé¢å†…å®¹ã€‚

ä»¥ categories.html ä¸ºä¾‹ï¼šé¡µé¢ä¸ºä¸Šä¸‹ç»“æ„ï¼Œä¸Šéƒ¨åˆ†ä¸º category åˆ—è¡¨ï¼›ä¸‹éƒ¨åˆ†ä¸ºæ¯ä¸€ä¸ª category æ‰€å¯¹åº”çš„æ–‡ç« åˆ—è¡¨å—ã€‚æœ€åé€šè¿‡ JS è„šæœ¬æ§åˆ¶ç‚¹å‡»ä¸Šéƒ¨åˆ†çš„ category æ—¶ï¼Œä¸‹éƒ¨åˆ†å¯¹åº”æ–‡ç« åˆ—è¡¨å—çš„æ˜¾éšã€‚

tags.html å®ç°æ–¹å¼åŒä¸Šã€‚

### æ€è·¯äºŒï¼šç”Ÿæˆèµ„æºæ•°æ®

åˆ©ç”¨ Jekyll çš„èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥æå‰æ„é€ ä¸€ä»½åŒ…å« Category å’Œ Tag ç›¸å…³èµ„æºçš„æ•°æ®æ–‡ä»¶ï¼ˆjson æ ¼å¼ï¼‰ï¼Œå½“åšå®¢éƒ¨ç½²ä¹‹åï¼Œè¿™ä»½æ•°æ®æ–‡ä»¶å°±å¯ä»¥è¢«å½“åšé™æ€èµ„æºè¢«è®¿é—®ï¼Œæ‹¿åˆ°æ•°æ®ä¹‹åå°±å¯ä»¥å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚

é¦–å…ˆæˆ‘ä»¬éœ€è¦ä½¿ç”¨ `site.categories` ã€ `site.tags` æ„é€ è¿™ä»½æ–‡ä»¶ï¼Œä»¥ /datas/categories.json ä¸ºä¾‹ï¼š

{% raw %}

```liquid
---
---

{
  "categories": [
    {% for category in site.categories %}
    {
      "name": "{{ category | first }}",
      "url": "{{ site.baseurl }}/categories#{{ category | first | slugify | url_encode }}",
      "datas": [
        {% for post in category.last %}
        "{{ post.title }}"{% if forloop.last == false %},{% endif %}
        {% endfor %}
      ]
    }{% if forloop.last == false %},{% endif %}
    {% endfor %}
  ]
}
```

{% endraw %}

â—**æ³¨ï¼šæ–‡ä»¶æœ€å¼€å§‹çš„ä¸¤è¡Œä¸èƒ½çœç•¥ï¼Œçœç•¥åå°†ä¸ä¼šè¢« Jekyll è¯†åˆ«å¹¶è§£æ**

éƒ¨ç½²ä¹‹åï¼Œæ­¤æ–‡ä»¶å°†ä¼šè¢« Jekyll è§£æç”Ÿæˆæœ€ç»ˆå†…å®¹ç¬¦åˆ JSON è§„èŒƒçš„ç›®æ ‡æ–‡ä»¶ï¼š`_site/datas/categories.json`ï¼Œæœ€åæˆ‘ä»¬å¯ä»¥é€šè¿‡ http çš„æ–¹å¼è·å–è¿™ä»½æ–‡ä»¶ï¼Œå¾—åˆ°æˆ‘ä»¬éœ€è¦çš„æ•°æ®ã€‚

![Category å’Œ Tag æ•°æ®çš„ç”Ÿæˆè¿‡ç¨‹](https://i.loli.net/2021/07/30/5w3sFVb6mq1rtRP.png)



## 6. categories / tags è®¾è®¡

[jekyll-archives](https://jekyll.github.io/jekyll-archives/)

category æˆ– tag ä¸­å¸¦æœ‰ç©ºæ ¼ã€/ ç­‰ç‰¹æ®Šç¬¦å·

tags æˆ–è€… tag åŒºåˆ«

{% raw %}

- ç”Ÿæˆ post.json çš„ `{{ post.tags }}` èƒ½å¤Ÿè¯†åˆ« tags å’Œ tagï¼›
- ä½†è·å–æ–‡ç«  tag çš„ `{{ page.tags }}` åªèƒ½å¤Ÿè¯†åˆ« tagsï¼ŒåŒç† `{{ page.tag }}` åªèƒ½è¯†åˆ« `tag`ï¼Œä½†é€šè¿‡ for-in éå†ä¾ç„¶èƒ½å¤Ÿè·å–ä¿¡æ¯ã€‚

{% endraw %}

å› æ­¤æˆ‘è¿˜æ˜¯ç»Ÿä¸€å®šä¸º tagsã€‚

## 1. jekyll-archives



å…¶é…ç½®ç®€å•ï¼š

```yaml
# _config.yml

plugins:
  - jekyll-archives

jekyll-archives:
  enabled:
    - tags
    - categories
  layouts:
    tag: tag
    category: category
  permalinks:
    tag: tags/:name/
    category: categories/:name/
```

åˆšå¼€å§‹ä¸€åˆ‡éƒ½å¾ˆé¡ºåˆ©ï¼Œç›´åˆ°éƒ¨ç½²åˆ° github pages ä¸­ï¼Œè®¸å¤šé—®é¢˜æ‰å¼€å§‹æµ®ç°ï¼š

é¦–å…ˆæ˜¯å¼‚å¸¸çš„æ— æ³•åŒºåˆ†éè‹±æ–‡çš„ category å’Œ tagã€‚

åœ¨ Mac ä¸­å¹¶æ²¡æœ‰å‡ºç°æ­¤é—®é¢˜ï¼Œä½†åœ¨ Windows ç¯å¢ƒä¸‹ä¼šå‡ºç°æ­¤é—®é¢˜ï¼Œå¹¶ä¸”ä¸æ˜¯æ‰€æœ‰éè‹±æ–‡ category ã€tag éƒ½æ— æ³•è®¿é—®ï¼Œå®å±è¯¡å¼‚ã€‚

å¦å¤–å‘ç°çš„ä¸€ä¸ªé—®é¢˜æ˜¯ï¼šgithub pages ä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œé™¤äº† [ç™½åå•](https://pages.github.com/versions/) ä¸Šéƒ¨åˆ†æ’ä»¶å¯ä»¥ä½¿ç”¨å¤–ï¼Œå…¶ä»–æ’ä»¶éƒ½æ— æ³•åœ¨ github pages ä¸­æ­£å¸¸ä½¿ç”¨ï¼Œjekyll-archives å°±ä¸åŒ…å«åœ¨ç™½åå•ä¹‹ä¸­ã€‚å¦‚æœæƒ³ç»§ç»­ä½¿ç”¨è¿™ç±»æ’ä»¶ï¼Œå®˜æ–¹ç»™å‡ºçš„è§£å†³åŠæ³•å°±æ˜¯åœ¨æœ¬åœ°å°† jekyll é¡¹ç›®è½¬åŒ–ä¸ºé™æ€èµ„æºæ–‡ä»¶ï¼Œå¹¶ä¸Šä¼ è‡³ githubï¼Œè€Œä¸èƒ½å†æ˜¯ jekyll é¡¹ç›®æºæ–‡ä»¶ã€‚

è€ƒè™‘æˆæœ¬ä»¥åŠ jekyll ç°æœ‰çš„åŠŸèƒ½ï¼Œæœ€ç»ˆè¿˜æ˜¯å†³å®šæ”¾å¼ƒ jekyll-archivesï¼Œè€Œæ˜¯ä½¿ç”¨ jekyll ç°æœ‰çš„èƒ½åŠ›æ¥å®ç° postã€categoryã€tag çš„èµ„æºå…³è”äº¤äº’ã€‚

## 2. ç»“æ„ã€æ ·å¼

{% raw %}

å®ç°ä¸€ï¼šåŒºåˆ†ä¸€ã€äºŒçº§åˆ†ç±»

```liquid
{% assign sorted_categories = site.categories | sort_natural %}

{% for c in sorted_categories %}
  <!-- å¼€å§‹éå†æ‰€æœ‰ category -->
  {% assign category = c | first %}
  {% assign posts = c | last %}
  {% assign category_group = "" | split: "" %}

  {% for p in posts %}
    <!-- éå† postsï¼Œè·å–å½“å‰ category å¯¹åº” post ä¸‹çš„æ‰€æœ‰ categories -->
    {% if category == p.categories[0] %}
      {% assign category_group = category_group | concat: p.categories %}
    {% endif %}
  {% endfor %}

  <!-- å»é‡ -->
  {% assign uniqed_category_group = category_group | uniq %}

  <!--
    uniqed_category_group ä¸ºä¸€ç»„åˆ†ç±»,
    [0] ä¸ºå½“å‰ç»„çš„ä¸€çº§åˆ†ç±»
    [1, .., length-1] ä¸ºäºŒçº§åˆ†ç±»
  -->
  {% for c2 in uniqed_category_group %}
    {% if forloop.first %}
    <li class="level-1{% if uniqed_category_group.size > 1 %} has-level-2{% endif %}">
      <a href="{{ c2 | slugify }}">{{ c2 }}</a>
      <span class="text-tip">{{ site.categories[c2] | size }} Posts</span>
    </li>
    {% else %}
    <ul class="{% if forloop.last == true %}last-level-2{% endif %}">
      <li class="level-2">
        <a href="{{ c2 | slugify }}">{{ c2 }}</a>
        <span class="text-tip">{{ site.categories[c2] | size }} Posts</span>
      </li>
    </ul>
    {% endif %}
  {% endfor %}
{% endfor %}
```

å®ç°äºŒï¼šä¸åŒºåˆ†ä¸€ã€äºŒçº§åˆ†ç±»

```liquid
{% assign categories = "" | split: "" %}
{% for c in site.categories %}
  {% assign categories = categories | push: c[0] %}
{% endfor %}

{% assign sorted_categories = categories | sort_natural %}

{% for category in sorted_categories %}
<li>
  <a href="{{ site.baseurl }}/categories/{{ category | slugify }}">{{ category }}</a>
  <sup>{{ site.categories[category] | size }} </sup>
</li>
{% endfor %}
```

{% endraw %}

## 3. å‚è€ƒ

- [GitHub Pages](https://pages.github.com/)

- [ç”¨ jekyll å’Œ jQuery å®ç°å¼‚æ­¥åŠ è½½æ–‡ç« åˆ—è¡¨](http://yanping.me/cn/blog/2012/10/10/asynchronous-loading-post-list-with-jekyll-and-jQuery/)

- [ç”¨ js åœ¨ jekyll åšå®¢ä¸­å®ç°æ ‡ç­¾äº‘å’Œæ ‡ç­¾é¡µ](http://yanping.me/cn/blog/2013/02/13/generate-tags-with-js-in-jekyll-blog/)

- [å¦‚ä½•ä½¿ç”¨ Jekyll çš„ Category å’Œ Tag](http://www.kthinker.com/post/jekyll-category-and-tag/)

- [ç”¨ jekyll ç”Ÿæˆ json](http://yanping.me/cn/blog/2012/04/19/jekyll-with-json/)

- [ç”¨ jekyll ç”ŸæˆåŒ…å« json å˜é‡çš„ js è„šæœ¬](http://yanping.me/cn/blog/2012/04/20/jekyll-with-js-and-json/)
